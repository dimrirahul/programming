<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>Your friend has invented a splendid cocktail consisting of N ingredients.  However, she has forgotten the amount of each ingredient that goes into the recipe.</p>

<p>For N-1 pairs of ingredients, she remembers the proportion in which the ingredients within each pair should be added to the cocktail. Fortunately, these N-1 proportions are sufficient to restore the recipe of the entire cocktail.</p>

<p>You are given a vector &lt;string&gt; <b>proportions</b> containing the N-1 proportions. Each element is formatted "#&lt;a&gt; and #&lt;b&gt; as &lt;p&gt;:&lt;q&gt;" (quotes for clarity), which means that the mass of ingredient &lt;a&gt; divided by the mass of ingredient &lt;b&gt; in the cocktail must be equal to &lt;p&gt;/&lt;q&gt; (all ingredients are 0-indexed). Return a vector &lt;int&gt; containing exactly N elements, where the i-th element is the mass of ingredient i, such that all the given proportions are satisfied and the total mass is as small as possible.  The total mass must be greater than 0.</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>IngredientProportions</td></tr><tr><td>Method:</td><td>getMasses</td></tr><tr><td>Parameters:</td><td>vector &lt;string&gt;</td></tr><tr><td>Returns:</td><td>vector &lt;int&gt;</td></tr><tr><td>Method signature:</td><td>vector &lt;int&gt; getMasses(vector &lt;string&gt; proportions)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>64</td></tr></table></td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>proportions</b> will contain between 1 and 9 elements, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>proportions</b> will contain exactly N-1 elements, where N is the number of ingredients in the cocktail.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>proportions</b> will contain exactly 16 characters.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>proportions</b> will be formatted as described in the statement.</td></tr><tr><td align="center" valign="top">-</td><td>Each &lt;a&gt; will be between 0 and N-1, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each &lt;b&gt; will be between 0 and N-1, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each &lt;p&gt; will be between 1 and 9, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each &lt;q&gt; will be between 1 and 9, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>The information given in <b>proportions</b> will be sufficient to restore the recipe of the cocktail uniquely up to a constant factor.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;#0 and #1 as 6:4&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: {3, 2 }</pre></td></tr><tr><td><table><tr><td colspan="2">Taking 6 units of ingredient #0 and 4 units of ingredient #1 would satisfy the proportion, but it wouldn't give the smallest possible total mass. To minimize the total mass, divide the masses by 2.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;#0 and #1 as 9:8&quot;,&quot;#1 and #2 as 9:8&quot;}
</pre></td></tr></table></td></tr><tr><td><pre>Returns: {81, 72, 64 }</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;#4 and #0 as 1:1&quot;, &quot;#4 and #1 as 3:1&quot;, &quot;#4 and #2 as 5:1&quot;, &quot;#4 and #3 as 7:1&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: {105, 35, 21, 15, 105 }</pre></td></tr><tr><td><table><tr><td colspan="2">The mass of ingredient #4 should be divisible by 3, 5 and 7. The smallest such number is 105.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;#2 and #3 as 6:8&quot;, &quot;#0 and #1 as 9:3&quot;, &quot;#3 and #0 as 7:5&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: {60, 20, 63, 84 }</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>